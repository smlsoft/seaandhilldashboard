<!DOCTYPE html>
<html>
<head>
    <title>Test Google Custom Search API</title>
</head>
<body>
    <h1>Test Google Custom Search API</h1>
    <p>ทดสอบโดยตรงกับ Google API</p>
    
    <div>
        <label>API Key:</label>
        <input type="text" id="apiKey" size="50" placeholder="ใส่ API Key">
    </div>
    <div>
        <label>Search Engine ID:</label>
        <input type="text" id="cseId" value="64914c28d3ae24cd2" size="30">
    </div>
    <div>
        <label>Query:</label>
        <input type="text" id="query" value="แนวโน้มราคาเหล็กโลก 2025" size="50">
    </div>
    <div>
        <button onclick="testSearch()">ค้นหา</button>
    </div>
    
    <h2>ผลลัพธ์:</h2>
    <pre id="result"></pre>
    
    <script>
        async function testSearch() {
            const apiKey = document.getElementById('apiKey').value;
            const cseId = document.getElementById('cseId').value;
            const query = document.getElementById('query').value;
            
            if (!apiKey) {
                alert('กรุณาใส่ API Key');
                return;
            }
            
            const url = `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${cseId}&q=${encodeURIComponent(query)}&num=5`;
            
            document.getElementById('result').textContent = 'กำลังค้นหา...';
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                document.getElementById('result').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('result').textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html>
